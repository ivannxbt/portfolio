name: Validate Configuration Files

on:
  push:
    branches: [ main, develop ]
  pull_request:
    branches: [ main, develop ]

jobs:
  validate:
    runs-on: ubuntu-latest
    
    steps:
    - name: Checkout repository
      uses: actions/checkout@v3
    
    - name: Validate YAML files
      run: |
        echo "üîç Validating YAML files..."
        find . -name "*.yml" -o -name "*.yaml" | while read file; do
          echo "Checking $file"
          python3 -c "import yaml; yaml.safe_load(open('$file'))" || exit 1
        done
        echo "‚úÖ All YAML files are valid"
    
    - name: Validate JSON files
      run: |
        echo "üîç Validating JSON files..."
        find . -name "*.json" | while read file; do
          echo "Checking $file"
          python3 -c "import json; json.load(open('$file'))" || exit 1
        done
        echo "‚úÖ All JSON files are valid"
    
    - name: Validate Markdown files
      run: |
        echo "üîç Checking Markdown files..."
        find . -name "*.md" | while read file; do
          echo "Found: $file"
        done
        echo "‚úÖ Markdown files check complete"
    
    - name: Verify directory structure
      run: |
        echo "üîç Verifying directory structure..."
        dirs=(".agents" ".claude" ".cursor" ".codex" ".gemini" ".github" "scripts")
        for dir in "${dirs[@]}"; do
          if [ -d "$dir" ]; then
            echo "‚úÖ $dir exists"
          else
            echo "‚ùå $dir is missing"
            exit 1
          fi
        done
        echo "‚úÖ Directory structure is valid"
